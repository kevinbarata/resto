<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.project.resto.dao.BranchDao">

    <insert id="add" parameterType="com.project.resto.dto.BranchDto" useGeneratedKeys="true" keyProperty="id">
        insert into resto.branch
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="name != null and name != ''">name,</if>
            <if test="bornDate != null and bornDate != ''">bornDate,</if>
            <if test="registrationNo != null and registrationNo != ''">registrationNo,</if>
            <if test="owner != null and owner != ''">owner,</if>
            <if test="province != null and province != ''">province,</if>

            <if test="city != null and city != ''">city,</if>
            <if test="district != null and district != ''">district,</if>
            <if test="urbanVillage != null and urbanVillage != ''">urbanVillage,</if>
            <if test="postcode != null and postcode != ''">postcode,</if>
            <if test="address != null and address != ''">address,</if>

            <if test="remark != null and remark!= ''">remark,</if>
            <if test="status != null and status!= ''">status,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="name != null and name != ''">#{name},</if>
            <if test="bornDate != null and bornDate != ''">#{bornDate},</if>
            <if test="registrationNo != null and registrationNo != ''">#{registrationNo},</if>
            <if test="owner != null and owner != ''">#{owner},</if>
            <if test="province != null and province != ''">#{province},</if>

            <if test="city != null and city != ''">#{city},</if>
            <if test="district != null and district != ''">#{district},</if>
            <if test="urbanVillage != null and urbanVillage != ''">#{urbanVillage},</if>
            <if test="postcode != null and postcode != ''">#{postcode},</if>
            <if test="address != null and address != ''">#{address},</if>

            <if test="remark != null and remark !=''">#{remark},</if>
            <if test="status != null and status !=''">#{status},</if>
        </trim>
    </insert>

    <select id="get" resultType="com.project.resto.dto.BranchDto" parameterType="com.project.resto.dto.BranchDto">
        SELECT  id as id,

        'name' as name,
        bornDate as bornDate,
        registrationNo as registrationNo,
        owner as owner,
        province as province,

        city as city,
        district as district,
        urbanVillage as urbanVillage,
        postcode as postcode,
        address as address,

        remark as remark,
        status as status,
        create_time as createTime,
        update_time as updateTime
        FROM resto.branch
        <where>
            1=1
            <if test="id != null and id != '' ">
             and id = #{id}
            </if>
            <if test="name != null and name != ''">
                and 'name' = #{name}
            </if>
            <if test="status != null and status != ''">
                and status = #{status}
            </if>
        </where>
        order by id desc
    </select>

    <update id="update" parameterType="com.project.resto.dto.BranchDto">
        update resto.branch
        <set>
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="bornDate != null and bornDate != ''">bornDate = #{bornDate},</if>
            <if test="registrationNo != null and registrationNo != ''">registrationNo = #{registrationNo},</if>
            <if test="owner != null and owner != ''">owner = #{owner},</if>
            <if test="province != null and province != ''">province = #{province},</if>

            <if test="city != null and city != ''">city = #{city},</if>
            <if test="district != null and district != ''">district = #{district},</if>
            <if test="urbanVillage != null and urbanVillage != ''">urbanVillage = #{urbanVillage},</if>
            <if test="postcode != null and postcode != ''">postcode = #{postcode},</if>
            <if test="address != null and address != ''">address = #{address},</if>

            <if test="remark != null and remark != ''">remark = #{remark},</if>
            <if test="status != null and status != ''">status = #{status},</if>
        </set>
        WHERE id = #{id}
    </update>

</mapper>
